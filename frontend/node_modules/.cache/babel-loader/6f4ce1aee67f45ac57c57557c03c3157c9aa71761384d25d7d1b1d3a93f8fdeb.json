{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nconst usePublish = () => {\n  _s();\n  const [error, setError] = useState({});\n  const {\n    authState,\n    authDispatch\n  } = useContext(AuthContext);\n  const handlePublish = async event => {\n    event.preventDefault();\n    let copyErr = {};\n    setError({});\n    for (let i = 0; i < event.target.length - 1; i++) {\n      if (event.target[i].value === \"\") copyErr[event.target[i].name] = \"This field cannot be left blank\";\n    }\n    setError(copyErr);\n    if (Object.keys(copyErr).length === 0) {\n      const body = {\n        [event.target[0].name]: event.target[0].value,\n        [event.target[1].name]: event.target[1].value\n      };\n      console.log(body);\n      const res = await fetch(\"http://localhost:2000/blog/publish/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${authState}`\n        },\n        body: JSON.stringify(body)\n      });\n      if (res.ok) event.target.reset();\n      const printOnConsole = await res.json();\n    }\n  };\n  return {\n    error,\n    handlePublish\n  };\n};\n_s(usePublish, \"KDYxGqROL2/ZCFV26xt2sDsnqws=\");\nexport default usePublish;","map":{"version":3,"names":["useState","useContext","AuthContext","usePublish","_s","error","setError","authState","authDispatch","handlePublish","event","preventDefault","copyErr","i","target","length","value","name","Object","keys","body","console","log","res","fetch","method","headers","JSON","stringify","ok","reset","printOnConsole","json"],"sources":["C:/Users/Tejasw/Desktop/project/frontend/src/hooks/usePublish.jsx"],"sourcesContent":["import {useState, useContext} from 'react'\r\nimport {AuthContext} from '../contexts/AuthContext'\r\n\r\nconst usePublish = ()=>{\r\n    const [error, setError] = useState({})\r\n    const {authState, authDispatch} = useContext(AuthContext)\r\n\r\n    const handlePublish = async (event)=>{\r\n        event.preventDefault()\r\n        let copyErr = {}\r\n        setError({})\r\n        for(let i=0; i<event.target.length-1; i++){\r\n            if(event.target[i].value===\"\")\r\n                copyErr[event.target[i].name] = \"This field cannot be left blank\"\r\n        }\r\n        setError(copyErr)\r\n        if(Object.keys(copyErr).length===0){\r\n            const body = {\r\n                [event.target[0].name]: event.target[0].value,\r\n                [event.target[1].name]: event.target[1].value,\r\n            }\r\n            console.log(body)\r\n            const res = await fetch (\"http://localhost:2000/blog/publish/\", {\r\n                method:\"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${authState}`\r\n                  },\r\n                body: JSON.stringify(body)\r\n            })\r\n            if(res.ok)\r\n                event.target.reset()\r\n            const printOnConsole = await res.json()\r\n        }\r\n    }\r\n\r\n    return({\r\n        error, handlePublish\r\n    })\r\n}\r\n\r\nexport default usePublish"],"mappings":";AAAA,SAAQA,QAAQ,EAAEC,UAAU,QAAO,OAAO;AAC1C,SAAQC,WAAW,QAAO,yBAAyB;AAEnD,MAAMC,UAAU,GAAGA,CAAA,KAAI;EAAAC,EAAA;EACnB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtC,MAAM;IAACO,SAAS;IAAEC;EAAY,CAAC,GAAGP,UAAU,CAACC,WAAW,CAAC;EAEzD,MAAMO,aAAa,GAAG,MAAOC,KAAK,IAAG;IACjCA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,IAAIC,OAAO,GAAG,CAAC,CAAC;IAChBN,QAAQ,CAAC,CAAC,CAAC,CAAC;IACZ,KAAI,IAAIO,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACH,KAAK,CAACI,MAAM,CAACC,MAAM,GAAC,CAAC,EAAEF,CAAC,EAAE,EAAC;MACtC,IAAGH,KAAK,CAACI,MAAM,CAACD,CAAC,CAAC,CAACG,KAAK,KAAG,EAAE,EACzBJ,OAAO,CAACF,KAAK,CAACI,MAAM,CAACD,CAAC,CAAC,CAACI,IAAI,CAAC,GAAG,iCAAiC;IACzE;IACAX,QAAQ,CAACM,OAAO,CAAC;IACjB,IAAGM,MAAM,CAACC,IAAI,CAACP,OAAO,CAAC,CAACG,MAAM,KAAG,CAAC,EAAC;MAC/B,MAAMK,IAAI,GAAG;QACT,CAACV,KAAK,CAACI,MAAM,CAAC,CAAC,CAAC,CAACG,IAAI,GAAGP,KAAK,CAACI,MAAM,CAAC,CAAC,CAAC,CAACE,KAAK;QAC7C,CAACN,KAAK,CAACI,MAAM,CAAC,CAAC,CAAC,CAACG,IAAI,GAAGP,KAAK,CAACI,MAAM,CAAC,CAAC,CAAC,CAACE;MAC5C,CAAC;MACDK,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACjB,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAE,qCAAqC,EAAE;QAC5DC,MAAM,EAAC,MAAM;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAG,UAASnB,SAAU;QACvC,CAAC;QACHa,IAAI,EAAEO,IAAI,CAACC,SAAS,CAACR,IAAI;MAC7B,CAAC,CAAC;MACF,IAAGG,GAAG,CAACM,EAAE,EACLnB,KAAK,CAACI,MAAM,CAACgB,KAAK,CAAC,CAAC;MACxB,MAAMC,cAAc,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,CAAC;IAC3C;EACJ,CAAC;EAED,OAAO;IACH3B,KAAK;IAAEI;EACX,CAAC;AACL,CAAC;AAAAL,EAAA,CApCKD,UAAU;AAsChB,eAAeA,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}